/*!CK:2192530525!*//*1392699482,178163779*/

if (self.CavalryLogger) { CavalryLogger.start_js(["DPygo"]); }

__d("legacy:Form",["Form"],function(a,b,c,d){a.Form=b('Form');},3);
__d("WebAfro",["$","Arbiter","AsyncDialog","AsyncRequest","CSS","csx","cx","DOM","DOMEvent","DOMEventListener","DOMQuery","Parent","ScrollAwareDOM","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u={isTicker:function(v){var w=q.scry(v,'^.fbFlyoutDialog');return (w.length>0);},isPermalink:function(v){var w=r.byClass(v,'permalinkBody');return w!=null;},isTimeline:function(v){var w=r.byClass(v,'fbTimelineUnit');return w!=null;},isFbFeed:function(v){return (u.findFbFeedRoot(v)!=null);},findFbFeedRoot:function(v){var w=null,x=v.getAttribute('ajaxify');if(x){var y=new t(x),z=y.getQueryData().options_button_id;if(!z)return null;var aa=g(z);w=r.byClass(aa,"_5pat");}else w=r.byClass(v,"_5pat");return w;},listenForUnhideLinkClicks:function(v,w){var x={context:w};p.add(v,'click',function(y){new o(y).kill();var z=u.findStoryElement(v),aa=new j().setURI('/ajax/feed/filter_action/afro_unhide').setMethod('POST').setRelativeTo(z).setData(x);if(u.isTimeline(v)){u.unhideTimelineStory(v);aa.send();}else if(u.isPermalink(v)){u.unhidePermalinkStory(v);aa.send();}else{aa.send();if(u.isTicker(v)){u.unhideStoryTicker(v);}else if(u.isFbFeed(v)){u.unhideStoryFbFeed(v);}else u.unhideStoryFeed(v);}u.removeAfroUI(v);h.inform('reflow');});},unhidePermalinkStory:function(v){var w=r.byClass(v,'permalinkBody');k.removeClass(w,"_5xsm");n.remove(n.find(w,"._5wvy"));},unhideTimelineStory:function(v){var w=r.byClass(v,'fbTimelineUnit');k.show(n.find(w,'.timelineUnitContainer'));k.hide(n.find(w,'.topBorder'));k.hide(n.find(w,'.bottomBorder'));k.hide(n.find(w,'.spinePointer'));},unhideStoryFeed:function(v){var w=q.find(v,'^.genericStreamStory');k.removeClass(w,'uiStreamStoryHide');var x=w.getAttribute('data-entity-id');if(x){var y=u.getAllStoriesForEntity(v,x);for(var z=0;z<y.length;++z)s.monitor(y[z],function(){k.removeClass(y[z],'uiStreamStoryHidden');});w.removeAttribute('data-entity-id',x);}},unhideStoryTicker:function(v){var w=q.find(v,'^.fbFlyoutDialog'),x=q.find(w,'.tickerDialogContent');k.show(x);},unhideStoryFbFeed:function(v){var w=u.findFbFeedRoot(v);k.removeClass(w,"_5y7m");k.removeClass(w,"_i6m");},removeAfroUI:function(v){var w=q.scry(v,"^._5wvy")[0];if(!w)w=q.find(v,'^.'+"_578c");n.remove(w);},replaceQuestionWithActionList:function(v,w,x){u.updateCloseButtonContextData(v,x);u.removeFeedImprovementSurvey(v);u.removeStoryHiddenNotice(v);u.removeDirectActionList(v);var y=q.find(v,"^._5cd2");n.replace(y,w);h.inform('reflow');},replaceQuestionWithQuestion:function(v,w,x){u.updateCloseButtonContextData(v,x);u.removeFeedImprovementSurvey(v);u.removeStoryHiddenNotice(v);u.removeDirectActionList(v);var y=q.scry(v,"^._5cd2");if(y.length>0){n.replace(y[0],w);}else{var z=q.find(v,"^._5cd3");n.replace(z,w);}h.inform('reflow');},removeStoryHiddenNotice:function(v){var w=q.find(v,'^.'+"_578c"),x=q.scry(w,"._564z");if(x.length>0)n.remove(x[0]);var y=q.scry(w,"._5p_6");if(y.length>0)n.remove(y[0]);},removeDirectActionList:function(v){var w=q.find(v,'^.'+"_578c"),x=q.scry(w,'.'+"_5abv");if(x.length>0)n.remove(x[0]);},removeQuestionDOM:function(v){var w=q.find(v,"^._5cd2");n.remove(w.parentNode);h.inform('reflow');},findStoryElement:function(v){var w,x=u.isTicker(v);if(x){var y=q.find(v,'^.fbFlyoutDialog'),z=y.getAttribute('data-ownerid');w=g(z);}else if(u.isFbFeed(v)){var aa=u.findFbFeedRoot(v);w=aa;}else if(u.isTimeline(v)){w=r.byClass(v,'fbTimelineUnit');}else w=q.find(v,'^.genericStreamStory');return w;},updateCloseButtonContextData:function(v,w){var x=q.find(v,"^._578c"),y=q.find(x,"._5c0l");y.setAttribute('data-context',w);},listenForCloseButtonClicks:function(v,w){var x=q.scry(v,"._5c0l");if(x.length===0)return;var y=x[0];y.setAttribute('data-context',w);p.add(y,'click',function(z){new o(z).kill();var aa=y.getAttribute('data-context'),ba=u.findStoryElement(y),ca={context:aa,action:"close"},da=new j().setURI('/ajax/feed/filter_action/afro_client_log').setMethod('POST').setRelativeTo(ba).setData(ca);if(u.isTimeline(v))u.closeForTimeline(v);da.send();u.closeAfro(v,y);});},closeAfro:function(v,w){if(u.isTimeline(v)){u.closeForTimeline(v);}else if(u.isTicker(v)){u.closeForTicker(w);}else if(u.isFbFeed(w)){u.closeForFbFeed(w);}else u.closeForFeed(w);},closeForTimeline:function(v){n.remove(r.byClass(v,'fbTimelineUnit'));},closeForFeed:function(v){var w=q.find(v,'^.genericStreamStory');n.remove(w);},closeForTicker:function(v){var w=q.find(v,'^.fbFlyoutDialog'),x=w.getAttribute('data-ownerid');n.remove(w);n.remove(g(x));},closeForFbFeed:function(v){n.remove(u.findFbFeedRoot(v));},openDialog:function(v){var w=new j().setURI(v);i.send(w);},hideStoryAndInjectAfroUI:function(v,w,x){u.listenForCloseButtonClicks(w,x);var y=q.scry(v,"^._578c");if(y.length>0){n.replace(y[0],w);h.inform('reflow');return;}if(u.isTimeline(v)){u.hideStoryAndInjectAfroTimeline(v,w);}else if(u.isTicker(v)){u.hideStoryAndInjectAfroTicker(v,w);}else if(u.isFbFeed(v)){u.injectAfroFbFeed(v,w);}else u.hideStoryAndInjectAfroFeed(v,w);h.inform('reflow');},hideStoryAndInjectAfroTimeline:function(v,w){var x=r.byClass(v,'fbTimelineUnit');n.prependContent(x,w);k.hide(n.find(x,'.topBorder'));k.hide(n.find(x,'.bottomBorder'));k.hide(n.find(x,'.spinePointer'));k.hide(n.find(x,'.timelineUnitContainer'));},hideStoryAndInjectAfroFeed:function(v,w){var x=q.find(v,'^.storyContent');n.insertBefore(x,w);var y=q.find(v,'^.genericStreamStory');k.addClass(y,'uiStreamStoryHide');},hideStoryAndInjectAfroTicker:function(v,w){var x=q.find(v,'^.tickerDialogContent');n.insertBefore(x,w);k.hide(x);},injectAfroFbFeed:function(v,w){var x=u.findFbFeedRoot(v);k.addClass(x,"_5y7m");var y=q.find(x,"._5lum");n.replace(y,w);},hideStoryAndInjectAfroPermalink:function(v,w){var x=r.byClass(v,'permalinkBody'),y=n.find(x,'.permalink_stream');k.addClass(x,"_5xsm");n.insertBefore(y,w);},hideAllStoriesAuthoredBy:function(v,w){if(!u.isTimeline(v)&&!u.isTicker(v)&&!u.isFbFeed(v)){var x=q.find(v,'^.genericStreamStory'),y=u.getAllStoriesForEntity(v,w);for(var z=0;z<y.length;++z)if(y[z]!==x)s.monitor(y[z],function(){k.addClass(y[z],'uiStreamStoryHidden');});x.setAttribute('data-entity-id',w);}},removeFeedImprovementSurvey:function(v){var w=q.find(v,"^._578c"),x=q.scry(w,"._5q1b");if(x.length>0)n.remove(x[0]);},getAllStoriesForEntity:function(v,w){var x=q.find(v,'^.uiStream'),y='.aid_'+w;return n.scry(x,y);}};f.listenForUnhideLinkClicks=u.listenForUnhideLinkClicks;f.replaceQuestionWithActionList=u.replaceQuestionWithActionList;f.removeQuestionDOM=u.removeQuestionDOM;f.replaceQuestionWithQuestion=u.replaceQuestionWithQuestion;f.openDialog=u.openDialog;f.hideStoryAndInjectAfroUI=u.hideStoryAndInjectAfroUI;f.hideAllStoriesAuthoredBy=u.hideAllStoriesAuthoredBy;f.injectAfroFbFeed=u.injectAfroFbFeed;f.hideStoryAndInjectAfroTimeline=u.hideStoryAndInjectAfroTimeline;f.hideStoryAndInjectAfroPermalink=u.hideStoryAndInjectAfroPermalink;f.findStoryElement=u.findStoryElement;f.closeAfro=u.closeAfro;});