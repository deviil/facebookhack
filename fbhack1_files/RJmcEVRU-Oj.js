/*!CK:233832976!*//*1392697452,178129739*/

if (self.CavalryLogger) { CavalryLogger.start_js(["zcjQn"]); }

__d("StarsRatableBase",["Event","CSS","DOM","Parent","Run","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n,o,p){this.root=n;this.freezeOnClick=o;this.stars=i.scry(n,'span');this.listeners=[g.listen(this.root,'click',this._onClick.bind(this)),g.listen(this.root,'mousemove',this._onMouseMove.bind(this)),g.listen(this.root,'mouseout',this._onMouseOut.bind(this))];this.holdMouseMove=false;this.setRating(p);k.onLeave(this.destroyListeners.bind(this));}m.init=function(n,o,p){return new m(n,o,p);};l(m.prototype,{_onClick:function(event){var n=this._getStarIndexFromEvent(event);if(!n)return;this.setRating(n);if(this.freezeOnClick){this.freeze();}else this.holdMouseMove=true;},_onMouseMove:function(event){if(this.holdMouseMove)return;var n=this._getStarIndexFromEvent(event);if(!n)return;this.setStars(n,true);},_onMouseOut:function(event){this.holdMouseMove=false;this.updateStars();},_getStarIndexFromEvent:function(event){var n=j.byTag(event.getTarget(),'span');if(n)return this.stars.indexOf(n)+1;return 0;},setRating:function(n){this._rating=n;this.updateStars();},updateStars:function(){this.setStars(this._rating);},setStars:function(n,o){var p=o?'hoverStar':'fullStar',q=o?'fullStar':'hoverStar';for(var r=0;r<this.stars.length;++r){h.removeClass(this.stars[r],q);var s=(r>=n);h.conditionClass(this.stars[r],p,!s);h.conditionClass(this.stars[r],'emptyStar',s);}},freeze:function(){h.addClass(this.root,'uiStarsRated');this.destroyListeners();},destroyListeners:function(){this.listeners.forEach(function(n){n&&n.remove();});this.listeners=[];}});a.StarsRatableBase=e.exports=m;});
__d("EgoCollectionsRecommendation",["Arbiter","AsyncRequest","DOM","DOMClone","Tooltip","csx","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={},o={},p=1500;function q(t,u){new h(t).setHandler(function(v){if(!v.payload)return;var w=null;for(var x in u){if(!w){i.setContent(u[x],v.payload.icon);w=(u[x]).firstChild;}else i.setContent(u[x],w=j.shallowClone(w));k.set(w,v.payload.tooltip);}}).send();}function r(t,u,event,v){if(v.category!==t)return;var w=o[t];if(!m(w))setTimeout(q.bind(null,u,w),p);}var s={keepIconSynced:function(t,u,v){if(!n[v])n[v]=g.subscribe('AudienceSelector/syncNonSelectorIcon',r.bind(null,v,u));o[v]||(o[v]={});o[v][t.id]=t;},replaceOrInsertTopUnit:function(t,u){if(!t)return;var v=i.scry(t,'^.ego_unit_container')[0];if(!v)return;var w=i.scry(v,"._53ee");if(w[0]){i.replace(w[0],u);}else i.prependContent(v,u);}};e.exports=s;});